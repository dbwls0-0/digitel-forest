<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Digital Forest</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.3/dist/tailwind.min.css" rel="stylesheet">
<style>
  body { transition: background-image 0.7s ease-in-out; font-family: 'Helvetica Neue', sans-serif; background-color: #f0fdf4; }
  textarea { resize: none; border-radius: 0.5rem; border: 1px solid #ccc; padding: 0.5rem; }
  button { transition: all 0.3s ease; border: none; cursor: pointer; }
  button:hover { transform: scale(1.05); }
  .card { background: rgba(255,255,255,0.9); backdrop-filter: blur(6px); border-radius: 1rem; box-shadow: 0 8px 20px rgba(0,0,0,0.12); padding: 1.5rem; }
  .mood-button { padding: 0.5rem 1rem; border-radius: 9999px; font-weight: bold; color: #fff; }
  .mood-button.tired { background: #facc15; }
  .mood-button.anxious { background: #3b82f6; }
  .mood-button.depressed { background: #8b5cf6; }
  .mood-button.angry { background: #ef4444; }
  .mood-button.unpleasant { background: #22d3ee; }
  .mood-button.selected { box-shadow: 0 4px 10px rgba(0,0,0,0.2); transform: scale(1.1); }
</style>
</head>
<body class="flex flex-col min-h-screen">

<header class="bg-green-600 text-white shadow-md">
  <div class="flex justify-between items-center px-6 py-4">
    <h1 class="text-3xl font-extrabold">Digital Forest</h1>
    <nav class="flex gap-3">
      <button onclick="navigate('home')" id="nav-home" class="px-3 py-1 rounded bg-green-500 hover:bg-green-400">í™ˆ</button>
      <button onclick="navigate('diary')" id="nav-diary" class="px-3 py-1 rounded bg-green-500 hover:bg-green-400">ê°ì •ì¼ê¸°</button>
      <button onclick="navigate('shared')" id="nav-shared" class="px-3 py-1 rounded bg-green-500 hover:bg-green-400">ê³µìœ ì˜ ìˆ²</button>
    </nav>
  </div>
</header>

<main class="flex-1 w-full" id="main-content"></main>

<footer class="bg-green-100 text-center p-3 text-sm text-green-800">Digital Forest â€” ë¡œì»¬ ë°ëª¨. ìµëª…ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.</footer>

<script>
const MOODS = {
  tired: { label: 'ì§€ì¹¨', bg: 'https://images.unsplash.com/photo-1506784983877-45594efa4cbe?auto=format&fit=crop&w=1400&q=80', audio: 'https://cdn.pixabay.com/download/audio/2022/03/14/audio_1b02f1b4f3.mp3', desc: 'í–‡ì‚´ ë¹„ì¹˜ëŠ” ìˆ²ì—ì„œ ì—ë„ˆì§€ë¥¼ íšŒë³µí•´ìš”.'},
  anxious: { label: 'ë¶ˆì•ˆ', bg: 'https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&fit=crop&w=1400&q=80', audio: 'https://cdn.pixabay.com/download/audio/2022/03/22/audio_4f81e8c4bb.mp3', desc: 'ì•ˆê°œ ë‚€ ìˆ²ì´ ë§ˆìŒì„ ì°¨ë¶„í•˜ê²Œ í•´ì¤ë‹ˆë‹¤.'},
  depressed: { label: 'ìš°ìš¸', bg: 'https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1400&q=80', audio: 'https://cdn.pixabay.com/download/audio/2022/03/15/audio_148c4b3482.mp3', desc: 'ì”ì”í•œ í˜¸ìˆ˜ê°€ ë§ˆìŒì„ ë‹¬ë˜ì¤ë‹ˆë‹¤.'},
  angry: { label: 'í™”ë‚¨', bg: 'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1400&q=80', audio: 'https://cdn.pixabay.com/download/audio/2022/03/15/audio_8a4a8c39e1.mp3', desc: 'í­í¬ ì†Œë¦¬ê°€ ë¶„ë…¸ë¥¼ ì‹í˜€ì¤ë‹ˆë‹¤.'},
  unpleasant: { label: 'ë¶ˆì¾Œ', bg: 'https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=1400&q=80', audio: 'https://cdn.pixabay.com/download/audio/2021/09/06/audio_10d4b2c2e3.mp3', desc: 'ë§‘ì€ ìˆ²ê¸¸ì´ ê¸°ë¶„ì„ ìƒì¾Œí•˜ê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.'}
};

const COMFORT_PHRASES = ['ë‹¹ì‹ ì˜ ê°ì •ì€ ìœ íš¨í•´ìš”.', 'ìˆ¨ì„ ê¹Šê²Œ ë“¤ì´ì‰¬ê³  ì²œì²œíˆ ë‚´ì‰¬ì–´ ë³´ì„¸ìš”.', 'ì§€ê¸ˆì˜ ë‹¹ì‹ ë„ ì¶©ë¶„íˆ ì˜í•˜ê³  ìˆì–´ìš”.', 'ì‘ì€ ì‰¼ì´ í° íšŒë³µìœ¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤.', 'ìˆ²ì€ ëŠ˜ ê·¸ ìë¦¬ì— ìˆì–´ìš”. ì ì‹œ ì‰¬ì–´ê°€ë„ ì¢‹ì•„ìš”.'];
const STORAGE_KEY = 'digital_forest_entries_html';
let currentMood = 'tired';
let entries = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');

function navigate(route){
  document.querySelectorAll('nav button').forEach(b=>b.classList.remove('bg-green-400'));
  document.getElementById('nav-'+route).classList.add('bg-green-400');
  if(route==='home'){ renderHome(); }
  else if(route==='diary'){ renderDiary(); }
  else if(route==='shared'){ renderShared(); }
}

function renderHome(){
  document.getElementById('main-content').innerHTML = `
    <div class="card relative" style="background-image:url(${MOODS[currentMood].bg}); background-size:cover; background-position:center; min-height:400px;">
      <div class="p-8 bg-gradient-to-t from-black/40 to-transparent text-white">
        <h2 class="text-4xl font-extrabold">ë‹¹ì‹ ì˜ ë§ˆìŒì´ ì‰´ ìˆ˜ ìˆëŠ” ìˆ²ìœ¼ë¡œ</h2>
        <p class="mt-3 leading-relaxed">ì§§ì€ ì‹œê°„ì„ ë‚´ì–´ ìˆ¨ì„ ê³ ë¥´ê³ , ìì—°ì„ ë– ì˜¬ë ¤ ë³´ì„¸ìš”.</p>
        <div class="mt-5 flex gap-3 flex-wrap">
          ${Object.keys(MOODS).map(k=>`<button onclick="setMood('${k}')" class="mood-button ${k} ${currentMood===k?'selected':''}">${MOODS[k].label}</button>`).join('')}
          <button onclick="playSound()" class="px-3 py-2 rounded bg-green-500 hover:bg-green-400">ì‚¬ìš´ë“œ ì¬ìƒ</button>
        </div>
        <audio id="audio-player"></audio>
      </div>
    </div>
  `;
}

function renderDiary(){
  document.getElementById('main-content').innerHTML = `
    <div class="grid md:grid-cols-2 gap-6">
      <div class="card" style="background-image:url(${MOODS[currentMood].bg}); background-size:cover; background-position:center; min-height:250px;">
        <div class="p-6 bg-gradient-to-t from-black/40 to-transparent text-white h-full">
          <h3 class="text-2xl font-bold">ì˜¤ëŠ˜ì˜ ê¸°ë¶„: ${MOODS[currentMood].label}</h3>
          <p class="mt-2 leading-relaxed">${MOODS[currentMood].desc}</p>
          <button onclick="playSound()" class="mt-4 px-3 py-2 rounded bg-green-500 hover:bg-green-400 text-sm">ì‚¬ìš´ë“œ ì¬ìƒ</button>
          <audio id="audio-player"></audio>
        </div>
      </div>
      <div class="card">
        <h4 class="text-lg font-semibold mb-2">ê°ì • ì¼ê¸°</h4>
        <div class="flex gap-2 flex-wrap mb-3">
          ${Object.keys(MOODS).map(k=>`<button onclick="setMood('${k}')" class="mood-button ${k} ${currentMood===k?'selected':''}">${MOODS[k].label}</button>`).join('')}
        </div>
        <textarea id="diary-text" placeholder="ì§€ê¸ˆ ëŠë¼ëŠ” ê°ì •ì„ ì ì–´ë³´ì„¸ìš”!" class="w-full h-40 p-2"></textarea>
        <div class="flex items-center gap-3 mt-3">
          <button onclick="saveDiary()" class="px-4 py-2 rounded bg-green-500 hover:bg-green-400">ì €ì¥í•˜ê¸°</button>
          <span id="message" class="text-sm text-green-700"></span>
        </div>
      </div>
    </div>
  `;
}

function renderShared(){
  document.getElementById('main-content').innerHTML = `
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-bold">ê³µìœ ì˜ ìˆ² â€” ìµëª… ì¼ê¸°</h3>
      <button onclick="clearAll()" class="px-3 py-1 rounded bg-red-400 hover:bg-red-300 text-sm">ëª¨ë‘ ì‚­ì œ</button>
    </div>
    ${entries.length===0?'<div class="card text-center p-6">ì•„ì§ ì €ì¥ëœ ì¼ê¸°ê°€ ì—†ì–´ìš”. ë‹¹ì‹ ì˜ ì²« ë‚˜ë­‡ìì´ ë˜ì–´ë³¼ë˜ìš”?</div>':''}
    <div class="grid gap-3">
      ${[...entries].sort((a,b)=>b.id-a.id).map((e,idx)=>`<div class="card p-4"><div class="flex items-center justify-between text-xs text-gray-500"><div>ìµëª… ë‚˜ë­‡ì ğŸŒ¿ #${entries.length-idx}</div><div>${new Date(e.ts).toLocaleString()}</div></div><div class="mt-2 text-sm leading-relaxed"><strong class="mr-2">ê¸°ë¶„: ${MOODS[e.mood]?.label || e.mood}</strong><div class="mt-1">${e.text}</div></div></div>`).join('')}
    </div>
  `;
}

function setMood(mood){ currentMood=mood; navigate('diary'); }

function playSound(){
  const audio = document.getElementById('audio-player');
  if(audio){ audio.src = MOODS[currentMood].audio; audio.play().catch(()=>{}); }
}

function saveDiary(){
  const text = document.getElementById('diary-text').value.trim();
  if(!text){ document.getElementById('message').innerText='ì¼ê¸°ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.'; setTimeout(()=>document.getElementById('message').innerText='',2000); return; }
  const entry={id:Date.now(), mood:currentMood, text, ts:new Date().toISOString()};
  entries.push(entry);
  localStorage.setItem(STORAGE_KEY, JSON.stringify(entries));
  document.getElementById('diary-text').value='';
  document.getElementById('message').innerText = COMFORT_PHRASES[Math.floor(Math.random()*COMFORT_PHRASES.length)];
  setTimeout(()=>document.getElementById('message').innerText='',3000);
}

function clearAll(){ if(confirm('ë¡œì»¬ì— ì €ì¥ëœ ëª¨ë“  ì¼ê¸°ë¥¼ ì‚­ì œí•˜ì‹œê² ì–´ìš”?')){ entries=[]; localStorage.removeItem(STORAGE_KEY); navigate('shared'); } }

navigate('home');
</script>

</body>
</html>
